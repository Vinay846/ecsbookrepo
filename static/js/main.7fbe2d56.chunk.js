(this.webpackJsonpecsbookrepo=this.webpackJsonpecsbookrepo||[]).push([[0],{69:function(e,t,n){},70:function(e,t,n){},80:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var r,c=n(3),o=n(0),a=n(17),s=n.n(a),i=(n(69),n(70),n(71),n(72),n(20)),l=n(14),b=n(52),u=n(27),j=n.n(u),d=n(47),h=n(22),f=Object(h.b)("bookStore/AsyncThunkgetBookInfoFromAPI",function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://s3-ap-southeast-1.amazonaws.com/he-public-data/books8f8fe52.json").then((function(e){return e.json()})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),O=Object(h.b)("bookStore/AsyncThunkSearch",function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",n.getState().bookStore.bookStore.filter((function(e){return e.title.toString().indexOf(t)>-1})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x=Object(h.b)("bookStore/AsyncThunkSortWithRating",function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),"0"!==t){e.next=5;break}return e.abrupt("return",n.getState().bookStore.bookStore.slice().sort((function(e,t){return e.average_rating-t.average_rating})));case 5:if("6"!==t){e.next=9;break}return e.abrupt("return",n.getState().bookStore.bookStore.slice().sort((function(e,t){return t.average_rating-e.average_rating})));case 9:return e.abrupt("return",n.getState().bookStore.bookStore.filter((function(e){return e.average_rating<t})).sort((function(e,t){return t.average_rating-e.average_rating})));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),m=Object(h.c)({name:"bookStore",initialState:{searchResult:[],bookInCart:[],bookStore:[]},reducers:{addDataInBookStore:function(e,t){console.log(t),e.bookStore=t.payload},addInCart:function(e,t){e.bookInCart.includes(t.payload)||e.bookInCart.push(t.payload)},removeFromCart:function(e,t){e.bookInCart=t.payload}},extraReducers:(r={},Object(b.a)(r,f.fulfilled,(function(e,t){console.log("fulfilled ",t),e.bookStore=t.payload})),Object(b.a)(r,O.fulfilled,(function(e,t){console.log("fulfilled search ",t),e.searchResult=t.payload})),r)}),k=m.actions,p=(k.addDataInBookStore,k.addInCart),g=k.removeFromCart,v=function(e){return e.bookStore},S=(n(80),n(19)),y=n(60),w=n(25),I=n(59);var C=function(){var e=Object(l.b)(),t=Object(l.c)(v),n=Object(o.useState)([]),r=Object(i.a)(n,2),a=r[0],s=r[1],b=Object(o.useState)([]),u=Object(i.a)(b,2),j=u[0],d=u[1],O=Object(o.useState)(30),m=Object(i.a)(O,2),k=m[0],g=m[1],C=Object(o.useState)("Sort by star"),N=Object(i.a)(C,2),E=N[0],A=N[1];Object(o.useEffect)((function(){j.length>0?s(j.slice(0,k)):t.bookStore.length>0&&s(t.bookStore.slice(0,k))}),[t,k,j]),Object(o.useEffect)((function(){e(f())}),[e]),Object(o.useEffect)((function(){d(t.searchResult)}),[t.searchResult]);var _=function(){window.innerHeight+document.documentElement.scrollTop===document.scrollingElement.scrollHeight&&g((function(e){return e+20}))};return Object(o.useEffect)((function(){return window.addEventListener("scroll",_),function(){window.removeEventListener("scroll",_)}})),Object(c.jsxs)("div",{className:"my-1",children:[Object(c.jsxs)(y.a,{title:E,id:"dropdown-menu",onSelect:function(t){var n;console.log(t),A(t),"Filter"!==t?e(x((n=t,"below 1"===n?"1":"below 2"===n?"2":"below 3"===n?"3":"below 4"===n?"4":""))).then(h.d).then((function(e){console.log(e),d(e),console.log("Sorted ",j)})):d([])},variant:"secondary",children:[Object(c.jsx)(w.a.Item,{eventKey:"below 1",children:"below 1"}),Object(c.jsx)(w.a.Item,{eventKey:"below 2",children:"below 2"}),Object(c.jsx)(w.a.Item,{eventKey:"below 3",children:"below 3"}),Object(c.jsx)(w.a.Item,{eventKey:"below 4",children:"below 4"}),Object(c.jsx)(w.a.Item,{eventKey:"Sort by star",children:"Clear"})]}),Object(c.jsx)("div",{className:"container booklist my-2 p-2",children:a.map((function(n,r){return Object(c.jsxs)("div",{className:"card my-1 mx-1 p-3",children:[n.title.length<100?n.title:n.title.slice(0,50),Object(c.jsx)(I.a,{emptySymbol:"fa fa-star-o",fullSymbol:"fa fa-star",initialRating:n.average_rating,readonly:"true"}),Object(c.jsxs)("div",{className:"rating-count",children:[n.ratings_count," Ratings"]}),Object(c.jsx)(S.a,{disabled:t.bookInCart.some((function(e){return e.bookID===n.bookID})),onClick:function(){e(p(n))},children:t.bookInCart.some((function(e){return e.bookID===n.bookID}))?"Added":"Add cart"})]},r)}))})]})},N=n(91),E=n(7);var A=function(){var e=Object(l.c)(v),t=Object(o.useState)(0),n=Object(i.a)(t,2),r=n[0],a=n[1],s=Object(E.f)(),b=Object(l.b)();return Object(o.useEffect)((function(){var t=0;e.bookInCart.length>0&&(e.bookInCart.forEach((function(e){t+=e.price})),console.log(t)),a(t)}),[e.bookInCart]),Object(c.jsxs)("div",{className:"container my-2",children:[Object(c.jsxs)(N.a,{striped:!0,bordered:!0,hover:!0,children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"#"}),Object(c.jsx)("th",{children:"Title"}),Object(c.jsx)("th",{children:"Authors"}),Object(c.jsx)("th",{children:"Price"})]})}),Object(c.jsxs)("tbody",{children:[e.bookInCart.map((function(e,t){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:t+1}),Object(c.jsx)("td",{children:e.title}),Object(c.jsx)("td",{children:e.authors}),Object(c.jsx)("td",{children:e.price})]})})),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{colSpan:"3",children:"Total amount"}),Object(c.jsx)("td",{children:r})]})]})]}),Object(c.jsx)("div",{className:"d-flex justify-content-center my-3",children:Object(c.jsx)(S.a,{disabled:0===e.bookInCart.length,onClick:function(){s.push("/confirm"),b(g([]))},children:"Pay now"})})]})},_=n(92),R=n(94),B=n(93),T=n(63);var D=function(){var e=Object(o.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(E.f)(),s=Object(o.useState)(),b=Object(i.a)(s,2),u=b[0],j=b[1],d=Object(l.c)(v),h=Object(l.b)();return Object(o.useEffect)((function(){j(d.bookInCart.length)}),[d.bookInCart.length]),Object(c.jsxs)(_.a,{bg:"dark",variant:"dark",children:[Object(c.jsx)(_.a.Brand,{style:{cursor:"pointer",color:"white"},onClick:function(){a.push("/")},children:"ECS"}),Object(c.jsx)(R.a,{className:"mr-auto"}),Object(c.jsxs)(B.a,{inline:!0,children:[Object(c.jsx)(T.a,{type:"text",value:n,onChange:function(e){return r(e.target.value)},placeholder:"Search",className:"mr-sm-2"}),Object(c.jsx)(S.a,{onClick:function(){n.trim().length>0&&(h(O(n)),a.push("/"))},variant:"outline-info",children:"Search"})]}),Object(c.jsxs)("div",{onClick:function(){r(""),a.push("/cart/")},className:"cart",children:[Object(c.jsx)("i",{className:"fa fa-shopping-cart fa-2x","aria-hidden":"true"}),Object(c.jsx)("span",{className:"badge badge-warning",id:"lblCartCount",children:u})]})]})},K=n(95);var F=function(){return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(K.a,{border:"success",style:{textAlign:"center"},children:Object(c.jsxs)(K.a.Body,{children:[Object(c.jsx)("i",{className:"fa fa-check-circle","aria-hidden":"true"}),Object(c.jsx)("h5",{children:"Order confirmed !"}),Object(c.jsx)("h6",{children:"Thankyou for Order"}),Object(c.jsxs)("h6",{children:["OrderId: ",Math.floor(1e9*Math.random())]})]})}),Object(c.jsx)("div",{className:"d-flex justify-content-center my-3",children:Object(c.jsx)(S.a,{href:"/",children:"make new order ?"})})]})};var P=function(){return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(D,{}),Object(c.jsxs)(E.c,{children:[Object(c.jsx)(E.a,{path:"/confirm",children:Object(c.jsx)(F,{})}),Object(c.jsx)(E.a,{path:"/cart",children:Object(c.jsx)(A,{})}),Object(c.jsx)(E.a,{path:"/",children:Object(c.jsx)(C,{})})]})]})},W=n(16),H=Object(W.c)({bookStore:m.reducer}),J=Object(h.a)({reducer:H});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=n(33);s.a.render(Object(c.jsx)(l.a,{store:J,children:Object(c.jsx)(L.a,{children:Object(c.jsx)(P,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[86,1,2]]]);
//# sourceMappingURL=main.7fbe2d56.chunk.js.map